{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/lucas/Desktop/advanced/frontend/new_components/molecules/modals/Dropdown.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n// Libs\nimport React, { useCallback, useEffect, useRef } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames\";\nimport { debounce } from \"lodash\"; // Components\n\nimport { Modal } from \"./Modal\"; // Utils\n\nimport { getOffsetTop, getOffsetLeft, getTransformOriginValue } from \"./_utils\";\nconst MARGIN_THRESHOLD = 16;\nexport const VERTICAL_TRANSFORM = {\n  TOP: \"top\",\n  CENTER: \"center\",\n  BOTTOM: \"bottom\"\n};\nexport const HORIZONTAL_TRANSFORM = {\n  LEFT: \"left\",\n  CENTER: \"center\",\n  RIGHT: \"right\"\n};\n\nfunction getElement(element) {\n  if (typeof element === \"function\") {\n    return element();\n  }\n\n  return element.current;\n}\n\nconst defaultAnchorOrigin = {\n  vertical: VERTICAL_TRANSFORM.BOTTOM,\n  horizontal: HORIZONTAL_TRANSFORM.LEFT\n};\nconst defaultTransformOrigin = {\n  vertical: VERTICAL_TRANSFORM.TOP,\n  horizontal: HORIZONTAL_TRANSFORM.LEFT\n};\nexport function Dropdown(_ref) {\n  let {\n    anchorEl,\n    anchorOrigin = defaultAnchorOrigin,\n    children,\n    className,\n    contentClassName: contentClassNameProp,\n    modalClassName: modalClassNameProp,\n    modalProps,\n    onClose,\n    open = false,\n    transformOrigin = defaultTransformOrigin\n  } = _ref,\n      otherProps = _objectWithoutProperties(_ref, [\"anchorEl\", \"anchorOrigin\", \"children\", \"className\", \"contentClassName\", \"modalClassName\", \"modalProps\", \"onClose\", \"open\", \"transformOrigin\"]);\n\n  const dropdownClassName = classnames(\"brain-c-dropdown\", className);\n  const modalClassName = classnames(\"brain-c-dropdown__modal\", modalClassNameProp);\n  const contentClassName = classnames(\"brain-o-paper\", \"brain-o-paper--shadow\", \"brain-c-dropdown__content\", contentClassNameProp);\n  const childrenRef = useRef();\n  const getAnchorOffset = useCallback(() => {\n    const anchorRect = getElement(anchorEl).getBoundingClientRect();\n    return {\n      top: anchorRect.top + getOffsetTop(anchorRect, anchorOrigin.vertical),\n      left: anchorRect.left + getOffsetLeft(anchorRect, anchorOrigin.horizontal)\n    };\n  }, [anchorEl, anchorOrigin.vertical, anchorOrigin.horizontal]);\n  const getTransformOrigin = useCallback(elementRect => {\n    return {\n      vertical: getOffsetTop(elementRect, transformOrigin.vertical),\n      horizontal: getOffsetLeft(elementRect, transformOrigin.horizontal)\n    };\n  }, [transformOrigin.vertical, transformOrigin.horizontal]);\n  const getPositionStyle = useCallback((elementRect, transformOrigin, anchorOffset) => {\n    let top = anchorOffset.top - transformOrigin.vertical;\n    let left = anchorOffset.left - transformOrigin.horizontal;\n    const bottom = top + elementRect.height;\n    const right = left + elementRect.width;\n    const heightThreshold = window.innerHeight - MARGIN_THRESHOLD;\n    const widthThreshold = window.innerWidth - MARGIN_THRESHOLD;\n\n    if (top < MARGIN_THRESHOLD) {\n      const diff = top - MARGIN_THRESHOLD;\n      top -= diff;\n      transformOrigin.vertical += diff;\n    } else if (bottom > heightThreshold) {\n      const diff = bottom - heightThreshold;\n      top -= diff;\n      transformOrigin.vertical += diff;\n    }\n\n    if (left < MARGIN_THRESHOLD) {\n      const diff = left - MARGIN_THRESHOLD;\n      left -= diff;\n      transformOrigin.horizontal += diff;\n    } else if (right > widthThreshold) {\n      const diff = right - widthThreshold;\n      left -= diff;\n      transformOrigin.horizontal += diff;\n    }\n\n    return {\n      top: `${Math.round(top)}px`,\n      left: `${Math.round(left)}px`,\n      transformOrigin: getTransformOriginValue(transformOrigin)\n    };\n  }, []);\n  const setPositionStyle = useCallback(() => {\n    const element = getElement(childrenRef);\n\n    if (!element) {\n      return;\n    }\n\n    const elementRect = {\n      width: element.offsetWidth,\n      height: element.offsetHeight\n    };\n    const transformOrigin = getTransformOrigin(elementRect);\n    const anchorOffset = getAnchorOffset();\n    const positioning = getPositionStyle(elementRect, transformOrigin, anchorOffset);\n    element.style.top = positioning.top;\n    element.style.left = positioning.left;\n    element.style.transformOrigin = positioning.transformOrigin;\n  }, [getTransformOrigin, getAnchorOffset, getPositionStyle]);\n  useEffect(() => {\n    setPositionStyle();\n  }, [setPositionStyle]);\n  useEffect(() => {\n    if (!open) {\n      return;\n    }\n\n    document.body.style.overflow = \"hidden\";\n    document.body.style.paddingRight = \"15px\";\n    return () => {\n      document.body.style.removeProperty(\"overflow\");\n      document.body.style.removeProperty(\"padding-right\");\n    };\n  }, [open]);\n  useEffect(() => {\n    if (!open) {\n      return;\n    }\n\n    const handleResize = debounce(() => setPositionStyle());\n    handleResize();\n    window.addEventListener(\"resize\", handleResize);\n    return () => {\n      handleResize.cancel();\n      window.removeEventListener(\"resize\", handleResize);\n    };\n  }, [open, setPositionStyle]);\n  return /*#__PURE__*/_jsxDEV(\"div\", _objectSpread(_objectSpread({}, otherProps), {}, {\n    className: dropdownClassName,\n    children: /*#__PURE__*/_jsxDEV(Modal, _objectSpread(_objectSpread({\n      className: modalClassName,\n      open: open,\n      onClose: onClose,\n      invisibleOverlay: true\n    }, modalProps), {}, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: contentClassName,\n        ref: childrenRef,\n        children: children\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 17\n      }, this)\n    }), void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 13\n    }, this)\n  }), void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 179,\n    columnNumber: 9\n  }, this);\n}\nDropdown.propTypes = {\n  /**\n   * Anchoring element\n   */\n  anchorEl: PropTypes.oneOfType([PropTypes.func, PropTypes.shape({\n    current: PropTypes.instanceOf(Element)\n  })]).isRequired,\n\n  /**\n   * Origin on anchoring element\n   */\n  anchorOrigin: PropTypes.shape({\n    vertical: PropTypes.oneOfType([PropTypes.number, PropTypes.oneOf(Object.values(VERTICAL_TRANSFORM))]).isRequired,\n    horizontal: PropTypes.oneOfType([PropTypes.number, PropTypes.oneOf(Object.values(HORIZONTAL_TRANSFORM))]).isRequired\n  }),\n\n  /**\n   * Children element\n   */\n  children: PropTypes.node,\n\n  /**\n   * Additional className to dropdown\n   */\n  className: PropTypes.string,\n\n  /**\n   * Additional className to content\n   */\n  contentClassName: PropTypes.string,\n\n  /**\n   * Additional className to modal\n   */\n  modalClassName: PropTypes.string,\n\n  /**\n   * Additional props to modal\n   */\n  modalProps: PropTypes.shape(Modal.propTypes),\n\n  /**\n   * Close handler\n   */\n  onClose: PropTypes.func,\n\n  /**\n   * If is open\n   */\n  open: PropTypes.bool,\n\n  /**\n   *\n   */\n  transformOrigin: PropTypes.shape({\n    vertical: PropTypes.oneOfType([PropTypes.number, PropTypes.oneOf(Object.values(VERTICAL_TRANSFORM))]).isRequired,\n    horizontal: PropTypes.oneOfType([PropTypes.number, PropTypes.oneOf(Object.values(HORIZONTAL_TRANSFORM))]).isRequired\n  })\n};","map":{"version":3,"sources":["/Users/lucas/Desktop/advanced/frontend/new_components/molecules/modals/Dropdown.js"],"names":["React","useCallback","useEffect","useRef","PropTypes","classnames","debounce","Modal","getOffsetTop","getOffsetLeft","getTransformOriginValue","MARGIN_THRESHOLD","VERTICAL_TRANSFORM","TOP","CENTER","BOTTOM","HORIZONTAL_TRANSFORM","LEFT","RIGHT","getElement","element","current","defaultAnchorOrigin","vertical","horizontal","defaultTransformOrigin","Dropdown","anchorEl","anchorOrigin","children","className","contentClassName","contentClassNameProp","modalClassName","modalClassNameProp","modalProps","onClose","open","transformOrigin","otherProps","dropdownClassName","childrenRef","getAnchorOffset","anchorRect","getBoundingClientRect","top","left","getTransformOrigin","elementRect","getPositionStyle","anchorOffset","bottom","height","right","width","heightThreshold","window","innerHeight","widthThreshold","innerWidth","diff","Math","round","setPositionStyle","offsetWidth","offsetHeight","positioning","style","document","body","overflow","paddingRight","removeProperty","handleResize","addEventListener","cancel","removeEventListener","propTypes","oneOfType","func","shape","instanceOf","Element","isRequired","number","oneOf","Object","values","node","string","bool"],"mappings":"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","sourcesContent":["// Libs\nimport React, { useCallback, useEffect, useRef } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames\";\nimport { debounce } from \"lodash\";\n\n// Components\nimport { Modal } from \"./Modal\";\n\n// Utils\nimport { getOffsetTop, getOffsetLeft, getTransformOriginValue } from \"./_utils\";\n\nconst MARGIN_THRESHOLD = 16;\n\nexport const VERTICAL_TRANSFORM = {\n    TOP: \"top\",\n    CENTER: \"center\",\n    BOTTOM: \"bottom\",\n};\n\nexport const HORIZONTAL_TRANSFORM = {\n    LEFT: \"left\",\n    CENTER: \"center\",\n    RIGHT: \"right\",\n};\n\nfunction getElement(element) {\n    if (typeof element === \"function\") {\n        return element();\n    }\n\n    return element.current;\n}\n\nconst defaultAnchorOrigin = {\n    vertical: VERTICAL_TRANSFORM.BOTTOM,\n    horizontal: HORIZONTAL_TRANSFORM.LEFT,\n};\n\nconst defaultTransformOrigin = {\n    vertical: VERTICAL_TRANSFORM.TOP,\n    horizontal: HORIZONTAL_TRANSFORM.LEFT,\n};\nexport function Dropdown({\n    anchorEl,\n    anchorOrigin = defaultAnchorOrigin,\n    children,\n    className,\n    contentClassName: contentClassNameProp,\n    modalClassName: modalClassNameProp,\n    modalProps,\n    onClose,\n    open = false,\n    transformOrigin = defaultTransformOrigin,\n    ...otherProps\n}) {\n    const dropdownClassName = classnames(\"brain-c-dropdown\", className);\n    const modalClassName = classnames(\"brain-c-dropdown__modal\", modalClassNameProp);\n    const contentClassName = classnames(\n        \"brain-o-paper\",\n        \"brain-o-paper--shadow\",\n        \"brain-c-dropdown__content\",\n        contentClassNameProp\n    );\n\n    const childrenRef = useRef();\n\n    const getAnchorOffset = useCallback(() => {\n        const anchorRect = getElement(anchorEl).getBoundingClientRect();\n\n        return {\n            top: anchorRect.top + getOffsetTop(anchorRect, anchorOrigin.vertical),\n            left: anchorRect.left + getOffsetLeft(anchorRect, anchorOrigin.horizontal),\n        };\n    }, [anchorEl, anchorOrigin.vertical, anchorOrigin.horizontal]);\n\n    const getTransformOrigin = useCallback(\n        (elementRect) => {\n            return {\n                vertical: getOffsetTop(elementRect, transformOrigin.vertical),\n                horizontal: getOffsetLeft(elementRect, transformOrigin.horizontal),\n            };\n        },\n        [transformOrigin.vertical, transformOrigin.horizontal]\n    );\n\n    const getPositionStyle = useCallback((elementRect, transformOrigin, anchorOffset) => {\n        let top = anchorOffset.top - transformOrigin.vertical;\n        let left = anchorOffset.left - transformOrigin.horizontal;\n        const bottom = top + elementRect.height;\n        const right = left + elementRect.width;\n\n        const heightThreshold = window.innerHeight - MARGIN_THRESHOLD;\n        const widthThreshold = window.innerWidth - MARGIN_THRESHOLD;\n\n        if (top < MARGIN_THRESHOLD) {\n            const diff = top - MARGIN_THRESHOLD;\n            top -= diff;\n            transformOrigin.vertical += diff;\n        } else if (bottom > heightThreshold) {\n            const diff = bottom - heightThreshold;\n            top -= diff;\n            transformOrigin.vertical += diff;\n        }\n\n        if (left < MARGIN_THRESHOLD) {\n            const diff = left - MARGIN_THRESHOLD;\n            left -= diff;\n            transformOrigin.horizontal += diff;\n        } else if (right > widthThreshold) {\n            const diff = right - widthThreshold;\n            left -= diff;\n            transformOrigin.horizontal += diff;\n        }\n\n        return {\n            top: `${Math.round(top)}px`,\n            left: `${Math.round(left)}px`,\n            transformOrigin: getTransformOriginValue(transformOrigin),\n        };\n    }, []);\n\n    const setPositionStyle = useCallback(() => {\n        const element = getElement(childrenRef);\n\n        if (!element) {\n            return;\n        }\n\n        const elementRect = {\n            width: element.offsetWidth,\n            height: element.offsetHeight,\n        };\n        const transformOrigin = getTransformOrigin(elementRect);\n        const anchorOffset = getAnchorOffset();\n\n        const positioning = getPositionStyle(elementRect, transformOrigin, anchorOffset);\n\n        element.style.top = positioning.top;\n        element.style.left = positioning.left;\n        element.style.transformOrigin = positioning.transformOrigin;\n    }, [getTransformOrigin, getAnchorOffset, getPositionStyle]);\n\n    useEffect(() => {\n        setPositionStyle();\n    }, [setPositionStyle]);\n\n    useEffect(() => {\n        if (!open) {\n            return;\n        }\n\n        document.body.style.overflow = \"hidden\";\n        document.body.style.paddingRight = \"15px\";\n\n        return () => {\n            document.body.style.removeProperty(\"overflow\");\n            document.body.style.removeProperty(\"padding-right\");\n        };\n    }, [open]);\n\n    useEffect(() => {\n        if (!open) {\n            return;\n        }\n\n        const handleResize = debounce(() => setPositionStyle());\n        handleResize();\n\n        window.addEventListener(\"resize\", handleResize);\n\n        return () => {\n            handleResize.cancel();\n            window.removeEventListener(\"resize\", handleResize);\n        };\n    }, [open, setPositionStyle]);\n\n    return (\n        <div {...otherProps} className={dropdownClassName}>\n            <Modal className={modalClassName} open={open} onClose={onClose} invisibleOverlay {...modalProps}>\n                <div className={contentClassName} ref={childrenRef}>\n                    {children}\n                </div>\n            </Modal>\n        </div>\n    );\n}\n\nDropdown.propTypes = {\n    /**\n     * Anchoring element\n     */\n    anchorEl: PropTypes.oneOfType([PropTypes.func, PropTypes.shape({ current: PropTypes.instanceOf(Element) })])\n        .isRequired,\n    /**\n     * Origin on anchoring element\n     */\n    anchorOrigin: PropTypes.shape({\n        vertical: PropTypes.oneOfType([PropTypes.number, PropTypes.oneOf(Object.values(VERTICAL_TRANSFORM))])\n            .isRequired,\n        horizontal: PropTypes.oneOfType([PropTypes.number, PropTypes.oneOf(Object.values(HORIZONTAL_TRANSFORM))])\n            .isRequired,\n    }),\n    /**\n     * Children element\n     */\n    children: PropTypes.node,\n    /**\n     * Additional className to dropdown\n     */\n    className: PropTypes.string,\n    /**\n     * Additional className to content\n     */\n    contentClassName: PropTypes.string,\n    /**\n     * Additional className to modal\n     */\n    modalClassName: PropTypes.string,\n    /**\n     * Additional props to modal\n     */\n    modalProps: PropTypes.shape(Modal.propTypes),\n    /**\n     * Close handler\n     */\n    onClose: PropTypes.func,\n    /**\n     * If is open\n     */\n    open: PropTypes.bool,\n    /**\n     *\n     */\n    transformOrigin: PropTypes.shape({\n        vertical: PropTypes.oneOfType([PropTypes.number, PropTypes.oneOf(Object.values(VERTICAL_TRANSFORM))])\n            .isRequired,\n        horizontal: PropTypes.oneOfType([PropTypes.number, PropTypes.oneOf(Object.values(HORIZONTAL_TRANSFORM))])\n            .isRequired,\n    }),\n};\n"]},"metadata":{},"sourceType":"module"}